FREQ EQU -5
POINTS EQU 50

ORG 0x20
sinDB:
DB 0x80,0x8f,0x9f,0xae,0xbd,0xca,0xd7,0xe2,0xeb,0xf3,0xf9,0xfd,0xff,0xff,0xfd,0xf9,0xf3,0xeb,0xe2,0xd7,0xca,0xbd,0xae,0x9f,0x8f,0x80,0x70,0x60,0x51,0x42,0x35,0x28,0x1d,0x14,0xc,0x6,0x2,0x0,0x0,0x2,0x6,0xc,0x14,0x1d,0x28,0x35,0x42,0x51,0x60,0x70

ORG 0
JMP main

ORG 0x80
main:
	;config interruptions
	SETB EA ;global enabler
	SETB ET0 ;enable timer0
	;config timer0 mode
	MOV TMOD, #00000010b ;software control, timer, auto-reload
	;setting timer0 values
	MOV TH0, #FREQ
	MOV TL0, TH0
	;setting pointer
	MOV DPTR, #sinDB
	MOV ACC, #0 ;pointer counte
	;DAC config
	CLR P0.7
	;starting timer0
	SETB TR0
	JMP $

updateDAC:
	MOVC A, @A+DPTR
	MOV P1, A
	RET

ORG 0x0B
timerInt:
	CJNE A, #POINTS, callUpdate
	MOV A, #0
callUpdate:
	PUSH ACC
	CALL updateDAC
	POP ACC
	INC A
	RETI